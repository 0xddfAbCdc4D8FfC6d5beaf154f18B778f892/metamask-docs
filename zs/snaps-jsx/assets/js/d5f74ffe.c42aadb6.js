"use strict";(self.webpackChunkmetamask_docs=self.webpackChunkmetamask_docs||[]).push([[3794],{65844:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var s=t(74848),a=t(28453),r=t(40267),i=t(19365);const o={sidebar_position:3},l="Use environment variables",c={id:"how-to/use-environment-variables",title:"Use environment variables",description:"You can use environment variables to compile your Snap.",source:"@site/snaps/how-to/use-environment-variables.md",sourceDirName:"how-to",slug:"/how-to/use-environment-variables",permalink:"/zs/snaps-jsx/snaps/how-to/use-environment-variables",draft:!1,unlisted:!1,editUrl:"https://github.com/MetaMask/metamask-docs/edit/main/snaps/how-to/use-environment-variables.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"snapsSidebar",previous:{title:"Communicate errors",permalink:"/zs/snaps-jsx/snaps/how-to/communicate-errors"},next:{title:"Restrict RPC API methods",permalink:"/zs/snaps-jsx/snaps/how-to/restrict-rpc-api"}},u={},d=[{value:"Use environment variables on the command line",id:"use-environment-variables-on-the-command-line",level:2},{value:"Use environment variables in a <code>.env</code> file",id:"use-environment-variables-in-a-env-file",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"use-environment-variables",children:"Use environment variables"}),"\n",(0,s.jsxs)(n.p,{children:["You can use environment variables to compile your Snap.\nThis is useful if you want to use different variables for testing your Snap locally and publishing\nyour Snap.\nYou can use environment variables ",(0,s.jsx)(n.a,{href:"#use-environment-variables-on-the-command-line",children:"on the command line"}),"\nor ",(0,s.jsxs)(n.a,{href:"#use-environment-variables-in-a-env-file",children:["in a ",(0,s.jsx)(n.code,{children:".env"})," file"]}),"."]}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.p,{children:"In addition to the environment variables you set, the following environment variables are set by the\nSnaps CLI:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:'NODE_ENV="production"'})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"NODE_DEBUG=false"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"DEBUG=false"})}),"\n"]})]}),"\n",(0,s.jsx)(n.h2,{id:"use-environment-variables-on-the-command-line",children:"Use environment variables on the command line"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Specify environment variables on the command line.\nFor example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"PUBLIC_KEY=abc123 SNAP_ENV=dev\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Build your Snap using the ",(0,s.jsx)(n.a,{href:"/zs/snaps-jsx/snaps/reference/cli/subcommands",children:"Snaps CLI"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"yarn mm-snap build\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"use-environment-variables-in-a-env-file",children:["Use environment variables in a ",(0,s.jsx)(n.code,{children:".env"})," file"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Specify environment variables in a ",(0,s.jsx)(n.code,{children:".env"})," file.\nFor example:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",metastring:'title=".env"',children:"PUBLIC_KEY=abc123\nSNAP_ENV=dev\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Specify the environment variables in your Snap's\n",(0,s.jsx)(n.a,{href:"/zs/snaps-jsx/snaps/learn/about-snaps/files#configuration-file",children:"configuration file"})," using the ",(0,s.jsx)(n.code,{children:"environment"})," option.\nFor example:"]}),"\n",(0,s.jsxs)(r.A,{children:[(0,s.jsx)(i.A,{value:"JavaScript",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",metastring:'title="snap.config.js"',children:'require("dotenv").config();\n\nmodule.exports = {\n  environment: {\n    SNAP_ENV: process.env.SNAP_ENV,\n    PUBLIC_KEY: process.env.PUBLIC_KEY,\n  },\n  // Other options.\n};\n'})})}),(0,s.jsx)(i.A,{value:"TypeScript",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",metastring:'title="snap.config.ts"',children:'import type { SnapConfig } from "@metamask/snaps-cli";\nimport * as dotenv from "dotenv";\ndotenv.config();\n\nconst config: SnapConfig = {\n  environment: {\n    SNAP_ENV: process.env.SNAP_ENV,\n    PUBLIC_KEY: process.env.PUBLIC_KEY,\n  },\n  // Other options.\n};\n\nexport default config;\n'})})})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"You can also use environment variables directly in your Snap.\nFor example:"}),"\n",(0,s.jsxs)(r.A,{children:[(0,s.jsx)(i.A,{value:"Functions",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",metastring:'title="index.ts"',children:'import { panel, text, heading } from "@metamask/snaps-sdk";\n\nawait snap.request({\n  method: "snap_dialog",\n  params: {\n    type: "alert",\n    content: panel([\n      heading("This custom alert is just for display purposes."),\n      text(`SNAP_ENV is ${process.env.SNAP_ENV}, PUBLIC_KEY is ${process.env.PUBLIC_KEY}`),\n    ]),\n  },\n});\n'})})}),(0,s.jsx)(i.A,{value:"JSX",flaskOnly:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",metastring:'title="index.tsx"',children:'import { Box, Text, Heading } from \'@metamask/snaps-sdk/jsx\';\n\nawait snap.request({\n  method: "snap_dialog",\n  params: {\n    type: "alert",\n    content: (\n      <Box>\n        <Heading>This custom alert is just for display purposes.</Heading>\n        <Text>\n          SNAP_ENV is {process.env.SNAP_ENV}, PUBLIC_KEY is {process.env.PUBLIC_KEY}\n        </Text>\n      </Box>\n    ),\n  },\n});\n'})})})]}),"\n"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},19365:(e,n,t)=>{t.d(n,{A:()=>i});t(96540);var s=t(18215);const a={tabItem:"tabItem_Ymn6"};var r=t(74848);function i(e){let{children:n,hidden:t,className:i}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,s.A)(a.tabItem,i),hidden:t,children:n})}},40267:(e,n,t)=>{t.d(n,{A:()=>S});var s=t(96540),a=t(20053),r=t(23104),i=t(56347),o=t(205),l=t(57485),c=t(31682),u=t(89466);function d(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:s,default:a}}=e;return{value:n,label:t,attributes:s,default:a}}))}(t);return function(e){const n=(0,c.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function h(e){let{queryString:n=!1,groupId:t}=e;const a=(0,i.W6)(),r=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(r),(0,s.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(a.location.search);n.set(r,e),a.replace({...a.location,search:n.toString()})}),[r,a])]}function v(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,r=p(e),[i,l]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const s=t.find((e=>e.default))??t[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:r}))),[c,d]=h({queryString:t,groupId:a}),[v,f]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,r]=(0,u.Dv)(t);return[a,(0,s.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:a}),b=(()=>{const e=c??v;return m({value:e,tabValues:r})?e:null})();(0,o.A)((()=>{b&&l(b)}),[b]);return{selectedValue:i,selectValue:(0,s.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),f(e)}),[d,f,r]),tabValues:r}}var f=t(92303);const b={tabList:"tabList_TRJ7",tabItem:"tabItem_hGfb",flaskOnly:"flaskOnly_bhbK"};var x=t(74848),g=t(96763);function j(e){let{className:n,block:t,selectedValue:s,selectValue:i,tabValues:o}=e;g.log(o);const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.a_)(),u=e=>{const n=e.currentTarget,t=l.indexOf(n),a=o[t].value;a!==s&&(c(n),i(a))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},n),children:o.map((e=>{let{value:n,label:t,attributes:r}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>l.push(e),onKeyDown:d,onClick:u,...r,className:(0,a.A)("tabs__item",b.tabItem,r?.className,{"tabs__item--active":s===n}),children:t??n},n)}))})}function y(e){let{lazy:n,children:t,selectedValue:a}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===a));return e?(0,s.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function N(e){const n=v(e),t={...n,tabValues:n.tabValues.map(((n,t)=>({...n,attributes:{...n.attributes,className:(0,a.A)(n.attributes?.className,{[b.flaskOnly]:e.children[t]?.props.flaskOnly})}})))};return(0,x.jsxs)("div",{className:(0,a.A)("tabs-container",b.tabList),children:[(0,x.jsx)(j,{...t,...e}),(0,x.jsx)(y,{...t,...e})]})}function S(e){const n=(0,f.A)();return(0,x.jsx)(N,{...e,children:d(e.children)},String(n))}},20053:(e,n,t)=>{function s(e){var n,t,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=s(e[n]))&&(a&&(a+=" "),a+=t);else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}t.d(n,{A:()=>a});const a=function(){for(var e,n,t=0,a="";t<arguments.length;)(e=arguments[t++])&&(n=s(e))&&(a&&(a+=" "),a+=n);return a}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var s=t(96540);const a={},r=s.createContext(a);function i(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);