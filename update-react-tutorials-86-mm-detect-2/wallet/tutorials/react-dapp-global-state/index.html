<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/react-dapp-global-state" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Create a React dapp with global state | MetaMask developer documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.metamask.io/update-react-tutorials-86-mm-detect-2/wallet/tutorials/react-dapp-global-state/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:image" content="/img/metamaskog.jpeg"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Create a React dapp with global state | MetaMask developer documentation"><meta data-rh="true" name="description" content="Create a multi-component React dapp with global state."><meta data-rh="true" property="og:description" content="Create a multi-component React dapp with global state."><link data-rh="true" rel="icon" href="/update-react-tutorials-86-mm-detect-2/img/metamask-fox.svg"><link data-rh="true" rel="canonical" href="https://docs.metamask.io/update-react-tutorials-86-mm-detect-2/wallet/tutorials/react-dapp-global-state/"><link data-rh="true" rel="alternate" href="https://docs.metamask.io/update-react-tutorials-86-mm-detect-2/wallet/tutorials/react-dapp-global-state/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.metamask.io/update-react-tutorials-86-mm-detect-2/wallet/tutorials/react-dapp-global-state/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://AWX4QVM59R-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="MetaMask developer documentation" href="/update-react-tutorials-86-mm-detect-2/opensearch.xml">




<link rel="preconnect" href="https://cdn.segment.io">
<script>!function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(t){return function(){if(window.analytics.initialized)return window.analytics[t].apply(window.analytics,arguments);var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(var t=0;t<e.methods.length;t++){var n=e.methods[t];e[n]=e.factory(n)}e.load=function(t,n){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i),e._loadOptions=n},e._writeKey="wiHgKsAdU1z4onl1WWMhQmED4ma1VXEI",e.SNIPPET_VERSION="4.16.1",e.load("wiHgKsAdU1z4onl1WWMhQmED4ma1VXEI",{cookie:{sameSite:"None",secure:!0}}),e.page()}}()</script>

<script src="https://cmp.osano.com/AzZMxHTbQDOQD8c1J/a2e89f0e-f467-4542-bfea-30ea2c1a6648/osano.js"></script>
<script src="https://plausible.io/js/script.js" defer="defer" data-domain="docs.metamask.io"></script>
<script src="/js/feedback-script.js" defer="defer" async></script>
<script src="/js/getfeedback.js" defer="defer" async></script><link rel="stylesheet" href="/update-react-tutorials-86-mm-detect-2/assets/css/styles.3dfbb225.css">
<script src="/update-react-tutorials-86-mm-detect-2/assets/js/runtime~main.12338b71.js" defer="defer"></script>
<script src="/update-react-tutorials-86-mm-detect-2/assets/js/main.f89b40ce.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/update-react-tutorials-86-mm-detect-2/"><div class="navbar__logo"><img src="/update-react-tutorials-86-mm-detect-2/img/metamask-logo.svg" alt="MetaMask logo" class="themedComponent_mlkZ themedComponent--light_NVdE" width="150"><img src="/update-react-tutorials-86-mm-detect-2/img/metamask-logo-dark.svg" alt="MetaMask logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" width="150"></div><b class="navbar__title text--truncate"> │ ‎ Documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/update-react-tutorials-86-mm-detect-2/wallet/">Wallet</a><a class="navbar__item navbar__link" href="/update-react-tutorials-86-mm-detect-2/snaps/">Snaps</a><a class="navbar__item navbar__link" href="/update-react-tutorials-86-mm-detect-2/services/">Services</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/update-react-tutorials-86-mm-detect-2/whats-new/">What&#x27;s new?</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><footer class="theme-doc-footer docusaurus-mt-lg margin-top--sm"></footer><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Create a React dapp with global state</h1>
<p>This tutorial walks you through integrating a React dapp with MetaMask.
The dapp has multiple components, and requires managing state globally.
You&#x27;ll use the <a href="https://v3.vitejs.dev/guide" target="_blank" rel="noopener noreferrer">Vite</a> build tool with React and TypeScript to create
the dapp.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>We recommend first <a href="/update-react-tutorials-86-mm-detect-2/wallet/tutorials/react-dapp-local-state/">creating a React dapp with local state</a>.
This tutorial is a follow-up to that tutorial.</p></div></div>
<p>The <a href="/update-react-tutorials-86-mm-detect-2/wallet/tutorials/react-dapp-local-state/">previous tutorial</a> walks you through creating a dapp that uses EIP-6963: Multi Injected Provider Discovery, iterates over all found providers and connects and remembers the selected wallet, all within a single component.
In real world use cases, a dapp might need to respond to state changes in different components.</p>
<p>In this tutorial, you&#x27;ll move that state and its relevant functions into
<a href="https://react.dev/reference/react/useContext" target="_blank" rel="noopener noreferrer">React context</a>, creating a
<a href="https://react.dev/learn/reusing-logic-with-custom-hooks#custom-hooks-sharing-logic-between-components" target="_blank" rel="noopener noreferrer">global state</a>
so other components and UI can affect it and get MetaMask wallet updates.</p>
<p>This tutorial uses multiple components and a more complex file structure. We&#x27;ll move the logic from our one component into many components and rethink how we deal with synchronization of the wallet state.</p>
<p>We&#x27;ll solve the issue where the dapp is refreshed and we lose track of the last connected wallet and add a disconnect function that resets the state and uses <a href="/update-react-tutorials-86-mm-detect-2/wallet/reference/wallet_revokePermissions/"><code>wallet_revokePermissions</code></a> to correctly disconnect from MetaMask.</p>
<p>Finally, we&#x27;ll deal with an edge case where a browser wallet could be disabled or uninstalled between refreshes.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Project source code</div><div class="admonitionContent_BuS1"><p>You can view the <a href="https://github.com/MetaMask/vite-react-global-tutorial" target="_blank" rel="noopener noreferrer">dapp source code on GitHub</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<ul>
<li><a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js</a> version 18+</li>
<li><a href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm" target="_blank" rel="noopener noreferrer">npm</a> version 9+</li>
<li>A text editor (for example, <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">VS Code</a>)</li>
<li>The <a href="https://metamask.io/download" target="_blank" rel="noopener noreferrer">MetaMask extension</a> installed</li>
<li>Basic knowledge of TypeScript, React, React Context and React Hooks</li>
<li>Have read <a href="/update-react-tutorials-86-mm-detect-2/wallet/tutorials/react-dapp-local-state/">Creating a React dapp with local state</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="steps">Steps<a href="#steps" class="hash-link" aria-label="Direct link to Steps" title="Direct link to Steps">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-set-up-the-project">1. Set up the project<a href="#1-set-up-the-project" class="hash-link" aria-label="Direct link to 1. Set up the project" title="Direct link to 1. Set up the project">​</a></h3>
<p>Since we will be taking a fresh approach to the structure of this project, we will not be using the previous tutorials code. Instead, I will walk you through a few steps of organizing the original component that we built into several new components and ensure that code can be reused.</p>
<p>For this reason there will be some familiar code from our previous tutorials single component, but our hooks and supporting files will be rewritten from scratch with global state (React Context) in mind. Where the previous tutorial took the least amount of steps possible to discover and connect to wallets, this tutorial will prepare you for building in a more advanced way.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone https://github.com/MetaMask/react-dapp-tutorial.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Checkout the <code>global-state-start</code> branch:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> react-dapp-tutorial </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> checkout global-state-start</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Install the node module dependencies:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">npm</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Open the project in a text editor.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you use VS Code, you can run the command <code>code .</code> to open the project.</p></div></div>
<p>This is a working React dapp, but it&#x27;s wiped out the code from the previous tutorial&#x27;s
<a href="https://github.com/MetaMask/react-dapp-tutorial/blob/local-state-final/src/App.tsx" target="_blank" rel="noopener noreferrer"><code>App.tsx</code></a> file.</p>
<p>Run the dapp using the command <code>npx vite</code>.
The starting point looks like the following:</p>
<p><img decoding="async" loading="lazy" src="/update-react-tutorials-86-mm-detect-2/assets/images/pt2-01-3c2f19aa1cdbeb15eab76717dc49ce0c.png" width="1516" height="1280" class="img_ev3q"></p>
<p>There are three components, each with static text: navigation (with a logo area and connect button),
display (main content area), and footer.
You&#x27;ll use the footer to show any MetaMask errors.</p>
<p>Before you start, comment out or remove the <code>border</code> CSS selector, as it&#x27;s only used as a visual aid.
Remove the following line from each component style sheet:</p>
<div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">Display.module.css | MetaMaskError.module.css | Navigation.module.css</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// </span><span class="token property">border</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token unit">px</span><span class="token plain"> solid </span><span class="token function" style="color:rgb(80, 250, 123)">rgb</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">...</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="styling">Styling<a href="#styling" class="hash-link" aria-label="Direct link to Styling" title="Direct link to Styling">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optional-linting-with-eslint">Optional: Linting with ESLint<a href="#optional-linting-with-eslint" class="hash-link" aria-label="Direct link to Optional: Linting with ESLint" title="Direct link to Optional: Linting with ESLint">​</a></h4>
<p>This dapp uses a standard ESLint configuration to keep the code consistent.
There are two ways to use ESLint:</p>
<ol>
<li>
<p>Run <code>npm run lint</code> or <code>npm run lint:fix</code> from the command line.
The former displays all the linting errors, and the latter updates your code to fix linting
errors where possible.</p>
</li>
<li>
<p>Set up your IDE to show linting errors and automatically fix them on save.
For example, in VS Code, you can create or update the file at <code>.vscode/settings.json</code> in the
root of the project with the following settings:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">settings.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;eslint.format.enable&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;eslint.packageManager&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;npm&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;editor.codeActionsOnSave&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;source.fixAll.eslint&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;eslint.codeActionsOnSave.mode&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;all&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="project-structure">Project structure<a href="#project-structure" class="hash-link" aria-label="Direct link to Project structure" title="Direct link to Project structure">​</a></h4>
<p>The following is a tree representation of the dapp&#x27;s <code>/src</code> directory:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── src</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── assets</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── components</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   └── WalletDiscovery</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   |   └── WalletDiscovery.module.css</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   |   └── WalletDiscovery.tsx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   ├─── WalletList</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   |   └── WalletList.module.css</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   |   └── WalletList.tsx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   ├── SelectedWallet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   |   └── SelectedWallet.module.css</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   |   └── SelectedWallet.tsx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   ├── MetaMaskError</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   |   └── MetaMaskError.module.css</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   |   └── MetaMaskError.tsx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── hooks</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   ├── Eip6963Provider.tsx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   └── useEip6963Provider.tsx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   ├── utils</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│   │   └── index.tsx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── App.css</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── App.tsx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── index.css</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── main.tsx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── vite-env.d.ts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Instead of a single component, there&#x27;s a <code>src/components</code> directory with UI and functionality
distributed into multiple components.
You&#x27;ll modify the dapp&#x27;s state in this directory and make it available to the rest of the dapp using
a <a href="https://react.dev/reference/react/useContext" target="_blank" rel="noopener noreferrer">context provider</a>.
This provider will sit in the <code>src/App.tsx</code> file and wrap it&#x27;s child components.</p>
<p>The child components will have access to the global state and the functions that modify the global state.
This ensures that any change to selected wallet is remembered and that any component could subscribe to those state changes.</p>
<p>The following graphic shows how the context provider wraps its child components, providing access to
the state modifier functions and the actual state itself.
Since React uses a one-way data flow, any change to the data gets re-rendered in those components automatically.</p>
<p><img decoding="async" loading="lazy" src="/update-react-tutorials-86-mm-detect-2/assets/images/pt2-02-1cc67378fe36943534741cd4f8b131bd.png" width="1516" height="1280" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-build-the-context-provider">2. Build the context provider<a href="#2-build-the-context-provider" class="hash-link" aria-label="Direct link to 2. Build the context provider" title="Direct link to 2. Build the context provider">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-wrap-components-with-the-context-provider">3. Wrap components with the context provider<a href="#3-wrap-components-with-the-context-provider" class="hash-link" aria-label="Direct link to 3. Wrap components with the context provider" title="Direct link to 3. Wrap components with the context provider">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-create-the-components-that-discover-list-and-connect-to-installed-wallets">4. Create the components that discover, list and connect to installed wallets<a href="#4-create-the-components-that-discover-list-and-connect-to-installed-wallets" class="hash-link" aria-label="Direct link to 4. Create the components that discover, list and connect to installed wallets" title="Direct link to 4. Create the components that discover, list and connect to installed wallets">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-display-metamask-data">5. Display MetaMask data<a href="#5-display-metamask-data" class="hash-link" aria-label="Direct link to 5. Display MetaMask data" title="Direct link to 5. Display MetaMask data">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-show-metamask-errors-in-the-footer">6. Show MetaMask errors in the footer<a href="#6-show-metamask-errors-in-the-footer" class="hash-link" aria-label="Direct link to 6. Show MetaMask errors in the footer" title="Direct link to 6. Show MetaMask errors in the footer">​</a></h3>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>You can see the <a href="https://github.com/MetaMask/react-dapp-tutorial/tree/global-state-final" target="_blank" rel="noopener noreferrer">source code</a>
for the final state of this dapp tutorial.</p></div><div class="getfeedback-container"><div ub-in-page="65299f6ab62d7120574ba82a"></div><div ub-in-page="6529a08f7a6d62001f19a79d"></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><div style="font-size:0.85rem"><a href="https://github.com/MetaMask/metamask-docs/edit/main/wallet/tutorials/react-dapp-global-state.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div><div class="col lastUpdated_VsjB"></div></div></footer></article></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#steps" class="table-of-contents__link toc-highlight">Steps</a><ul><li><a href="#1-set-up-the-project" class="table-of-contents__link toc-highlight">1. Set up the project</a><ul><li><a href="#styling" class="table-of-contents__link toc-highlight">Styling</a></li><li><a href="#optional-linting-with-eslint" class="table-of-contents__link toc-highlight">Optional: Linting with ESLint</a></li><li><a href="#project-structure" class="table-of-contents__link toc-highlight">Project structure</a></li></ul></li><li><a href="#2-build-the-context-provider" class="table-of-contents__link toc-highlight">2. Build the context provider</a></li><li><a href="#3-wrap-components-with-the-context-provider" class="table-of-contents__link toc-highlight">3. Wrap components with the context provider</a></li><li><a href="#4-create-the-components-that-discover-list-and-connect-to-installed-wallets" class="table-of-contents__link toc-highlight">4. Create the components that discover, list and connect to installed wallets</a></li><li><a href="#5-display-metamask-data" class="table-of-contents__link toc-highlight">5. Display MetaMask data</a></li><li><a href="#6-show-metamask-errors-in-the-footer" class="table-of-contents__link toc-highlight">6. Show MetaMask errors in the footer</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/update-react-tutorials-86-mm-detect-2/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/update-react-tutorials-86-mm-detect-2/wallet/">MetaMask wallet</a></li><li class="footer__item"><a class="footer__link-item" href="/update-react-tutorials-86-mm-detect-2/wallet/how-to/use-sdk/">MetaMask SDK</a></li><li class="footer__item"><a class="footer__link-item" href="/update-react-tutorials-86-mm-detect-2/snaps/">Snaps</a></li><li class="footer__item"><a class="footer__link-item" href="/update-react-tutorials-86-mm-detect-2/services/">Services</a></li></ul></div><div class="col footer__col"><div class="footer__title">GitHub</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/MetaMask/metamask-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/MetaMask/metamask-extension/" target="_blank" rel="noopener noreferrer" class="footer__link-item">MetaMask wallet GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/MetaMask/metamask-sdk/" target="_blank" rel="noopener noreferrer" class="footer__link-item">MetaMask SDK GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/MetaMask/snaps-monorepo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Snaps GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/consensys" target="_blank" rel="noopener noreferrer" class="footer__link-item">Consensys Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/MetaMask/metamask-extension/blob/develop/docs/README.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contribute to MetaMask<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/MetaMask/metamask-docs/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contribute to the docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://consensys.net/privacy-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://consensys.net/terms-of-use/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://metamask.io/cla/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contributor License Agreement<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><button id="manage-cookie-btn">Manage cookies</button></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://metamask.io/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/update-react-tutorials-86-mm-detect-2/img/metamask-logo.svg" alt="MetaMask logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" width="250"><img src="/update-react-tutorials-86-mm-detect-2/img/metamask-logo-dark.svg" alt="MetaMask logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" width="250"></a></div><div class="footer__copyright">© 2024 MetaMask • A Consensys Formation</div></div></div></footer></div>
</body>
</html>