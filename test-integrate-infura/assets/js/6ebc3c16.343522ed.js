"use strict";(self.webpackChunkmetamask_docs=self.webpackChunkmetamask_docs||[]).push([[45950],{17703:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>l,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var t=n(74848),r=n(28453);const i={},a="HTTP API methods",o={id:"reference/ipfs/http-api-methods/index",title:"HTTP API methods",description:"The IPFS documentation lists the IPFS HTTP API methods.",source:"@site/services/reference/ipfs/http-api-methods/index.md",sourceDirName:"reference/ipfs/http-api-methods",slug:"/reference/ipfs/http-api-methods/",permalink:"/test-integrate-infura/services/reference/ipfs/http-api-methods/",draft:!1,unlisted:!1,editUrl:"https://github.com/MetaMask/metamask-docs/edit/main/services/reference/ipfs/http-api-methods/index.md",tags:[],version:"current",frontMatter:{},sidebar:"servicesSidebar",previous:{title:"Quickstart",permalink:"/test-integrate-infura/services/reference/ipfs/quickstart"},next:{title:"add",permalink:"/test-integrate-infura/services/reference/ipfs/http-api-methods/add"}},d={},c=[{value:"Arguments",id:"arguments",level:2},{value:"Flags",id:"flags",level:2},{value:"HTTP status codes",id:"http-status-codes",level:2},{value:"NDJSON responses",id:"ndjson-responses",level:2}];function h(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"http-api-methods",children:"HTTP API methods"}),"\n",(0,t.jsxs)(s.p,{children:["The IPFS documentation lists the ",(0,t.jsx)(s.a,{href:"https://docs.ipfs.io/reference/http/api/",children:"IPFS HTTP API methods"}),"."]}),"\n",(0,t.jsx)(s.p,{children:"Infura supports a subset of these which are detailed in this section."}),"\n",(0,t.jsx)(s.admonition,{type:"info",children:(0,t.jsxs)(s.p,{children:["All Infura IPFS methods require including your ",(0,t.jsx)(s.a,{href:"../../../../../developer-tools/dashboard/get-started/create-api/",children:"API key"})," and\n",(0,t.jsx)(s.a,{href:"../../../../dashboard/secure-an-api/api-key-secret.md",children:"API key secret"})," in the request."]})}),"\n",(0,t.jsx)(s.h2,{id:"arguments",children:"Arguments"}),"\n",(0,t.jsxs)(s.p,{children:["Arguments are added through the special query string key ",(0,t.jsx)(s.code,{children:"arg"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'curl -X POST -u "<API_KEY>:<API_KEY_SECRET>" "https://ipfs.infura.io:5001/api/v0/cat?arg=QmeGAVddnBSnKc1DLE7DLV9uuTqo5F7QbaveTjr45JUdQn"\n'})}),"\n",(0,t.jsxs)(s.p,{children:["Note that ",(0,t.jsx)(s.code,{children:"arg"})," can be used multiple times to signify multiple arguments."]}),"\n",(0,t.jsx)(s.h2,{id:"flags",children:"Flags"}),"\n",(0,t.jsxs)(s.p,{children:["Flags commonly used with the IPFS CLI are added through the query string. For example, the ",(0,t.jsx)(s.code,{children:"--encoding=json"})," flag is the ",(0,t.jsx)(s.code,{children:"&encoding=json"})," query parameter below:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'> curl -X POST -u "<API_KEY>:<API_KEY_SECRET>" "https://ipfs.infura.io:5001/api/v0/object/get?arg=QmaaqrHyAQm7gALkRW8DcfGX3u8q9rWKnxEMmf7m9z515w&encoding=json"\n{\n  "Links": [\n    {\n      "Name": "index.html",\n      "Hash": "QmYftndCvcEiuSZRX7njywX2AGSeHY2ASa7VryCq1mKwEw",\n      "Size": 1700\n    },\n    {\n      "Name": "static",\n      "Hash": "QmdtWFiasJeh2ymW3TD2cLHYxn1ryTuWoNpwieFyJriGTS",\n      "Size": 2428803\n    }\n  ],\n  "Data": "CAE="\n}\n'})}),"\n",(0,t.jsx)(s.admonition,{type:"info",children:(0,t.jsxs)(s.p,{children:["Some arguments may belong only to the CLI but appear here too. These usually belong to client-side processing of input, particularly in the ",(0,t.jsx)(s.code,{children:"add"})," command."]})}),"\n",(0,t.jsx)(s.h2,{id:"http-status-codes",children:"HTTP status codes"}),"\n",(0,t.jsx)(s.p,{children:"Status codes used at the RPC layer are simple:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"200"})," - The request was processed or is being processed (streaming)"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"500"})," - RPC endpoint returned an error"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"400"})," - Malformed RPC, argument type error, etc"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"403"})," - RPC call forbidden"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"404"})," - RPC endpoint doesn't exist"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"405"})," - HTTP Method Not Allowed"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Status code ",(0,t.jsx)(s.code,{children:"500"})," means that the requested RPC function ",(0,t.jsx)(s.em,{children:"does"})," exist, but IPFS was not able to fulfill the request because of an error. To know the reason, you have to look at the error message that is usually returned with the body of the response (if no error, check application logs)."]}),"\n",(0,t.jsxs)(s.p,{children:["Streaming endpoints fail as above, unless they have started streaming. That means they will have sent a ",(0,t.jsx)(s.code,{children:"200"})," status code already. If an error happens during the stream, it will be included in a ",(0,t.jsx)(s.code,{children:"Trailer"})," response header (some endpoints may additionally include an error in the last streamed object)."]}),"\n",(0,t.jsxs)(s.p,{children:["A ",(0,t.jsx)(s.code,{children:"405"}),"error may mean that you are using the wrong HTTP method (i.e. GET instead of POST), or that you are not allowed to call that method (i.e. due to CORS restrictions when making a request from a browser)."]}),"\n",(0,t.jsx)(s.h2,{id:"ndjson-responses",children:"NDJSON responses"}),"\n",(0,t.jsxs)(s.p,{children:["When a bunch of objects are requested, IPFS returns them in the Newline Delimited JSON, ",(0,t.jsx)(s.a,{href:"http://ndjson.org/",children:"NDJSON"}),", format."]}),"\n",(0,t.jsx)(s.p,{children:"This is because the calls are asynchronous and the responses are processed one object at a time."}),"\n",(0,t.jsx)(s.admonition,{type:"warning",children:(0,t.jsxs)(s.p,{children:["Response JSON includes ",(0,t.jsx)(s.code,{children:"\\n"})," separators which must be dealt with."]})})]})}function l(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var t=n(96540);const r={},i=t.createContext(r);function a(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);